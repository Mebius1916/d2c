# Figma è®¾è®¡æ•°æ®æ¸…æ´—å¼•æ“

è¿™æ˜¯ä¸€ä¸ªæ ¸å¿ƒå¼•æ“æ¨¡å—ï¼Œç”¨äºæå–ã€æ¸…æ´—å’Œæ ‡å‡†åŒ– Figma REST API è¿”å›çš„åŸå§‹ JSON æ•°æ®ã€‚å®ƒå°†åºå¤§ã€å¤æ‚çš„ç‰©ç†è®¾è®¡æ•°æ®è½¬æ¢ä¸ºå¼€å‘è€…å‹å¥½çš„ã€CSS å°±ç»ªçš„ JSON æ ¼å¼ï¼Œä½œä¸º Design-to-Code (D2C) å·¥ä½œæµä¸­çš„ ETL (æå–-è½¬æ¢-åŠ è½½) ç®¡é“ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
core/
â”œâ”€â”€ extractors/       # æ ¸å¿ƒéå†ä¸æå–é€»è¾‘ ("Extract" é˜¶æ®µ)
â”‚   â”œâ”€â”€ node-walker.ts      # ä¸» DFS (æ·±åº¦ä¼˜å…ˆ) éå†å¼•æ“
â”‚   â”œâ”€â”€ built-in.ts         # å…·ä½“æå–ç­–ç•¥ (å¸ƒå±€ã€æ ·å¼ã€æ–‡æœ¬)
â”‚   â”œâ”€â”€ design-extractor.ts # å…¬å…± API å…¥å£
â”‚   â””â”€â”€ types.ts            # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ transformers/     # å±æ€§è½¬æ¢é€»è¾‘ ("Transform" é˜¶æ®µ)
â”‚   â”œâ”€â”€ layout.ts           # Flexboxã€å°ºå¯¸ã€å®šä½è½¬æ¢
â”‚   â”œâ”€â”€ style.ts            # é¢œè‰²ã€æ¸å˜ã€å¡«å……è½¬æ¢
â”‚   â”œâ”€â”€ text.ts             # æ’ç‰ˆã€è¡Œé«˜ã€å­—é—´è·è½¬æ¢
â”‚   â”œâ”€â”€ effects.ts          # é˜´å½±ã€æ¨¡ç³Šæ»¤é•œè½¬æ¢
â”‚   â””â”€â”€ component.ts        # ç»„ä»¶å±æ€§æå–
â””â”€â”€ utils/            # è¾…åŠ©å‡½æ•°
    â”œâ”€â”€ identity.ts         # ç±»å‹å®ˆå« (isFrame, isText ç­‰)
    â””â”€â”€ common.ts           # æ•°å­¦è®¡ç®—ã€ID ç”Ÿæˆã€å¯è§æ€§æ£€æŸ¥
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. CSS ä¼˜å…ˆçš„å¸ƒå±€è½¬æ¢

å°† Figma çš„ç‰©ç†å¸ƒå±€æ¨¡å‹è½¬æ¢ä¸ºç°ä»£ CSS Flexbox æ¨¡å‹ã€‚

- **AutoLayout** â†’ `display: flex`
- **ä¸»è½´/äº¤å‰è½´å¯¹é½** â†’ `justify-content` / `align-items`
- **Padding/Gap** â†’ æ ‡å‡† CSS å•ä½ (è‡ªåŠ¨åˆå¹¶ç®€å†™å±æ€§)
- **Sizing (å°ºå¯¸)** â†’ `fixed` / `fill` / `hug` è¯­ä¹‰åŒ–æ˜ å°„

### 2. æ™ºèƒ½æ ·å¼å»é‡

é¿å…åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé‡å¤å­˜å‚¨å·¨å¤§çš„é¢œè‰²å¯¹è±¡ï¼Œè€Œæ˜¯å°†æ ·å¼æå–åˆ°å…¨å±€å­—å…¸ä¸­ã€‚

- **è½¬æ¢å‰**: æ¯ä¸ªæŒ‰é’®éƒ½æœ‰ `{ r: 0.2, g: 0.4, b: 1, a: 1 }`
- **è½¬æ¢å**: èŠ‚ç‚¹ä»…ä¿ç•™ `fills: "style_primary_blue"`ï¼Œå…·ä½“å®šä¹‰å­˜å‚¨åœ¨ GlobalVars ä¸­ã€‚

### 3. æ’ç‰ˆæ ‡å‡†åŒ–

- å°†ç»å¯¹åƒç´ çš„è¡Œé«˜ (`line-height`) è½¬æ¢ä¸ºç›¸å¯¹å•ä½ `em`ã€‚
- æå–å­—é‡ã€å­—ä½“å®¶æ—å’Œå­—é—´è·åˆ°å¹²å‡€çš„å¯¹è±¡ä¸­ã€‚

### 4. å™ªéŸ³è¿‡æ»¤

- è‡ªåŠ¨è·³è¿‡ä¸å¯è§èŠ‚ç‚¹ (`visible: false`)ã€‚
- å°½å¯èƒ½åˆå¹¶å†—ä½™çš„çŸ¢é‡è·¯å¾„ (åŸºç¡€ SVG ç¼©å‡)ã€‚

## ğŸ”„ æ•°æ®æµè½¬é“¾è·¯ (Data Pipeline)

æ•°æ®åœ¨å¼•æ“ä¸­çš„æµåŠ¨éµå¾ªæ ‡å‡†çš„ DFS (æ·±åº¦ä¼˜å…ˆéå†) + ç®¡é“å¤„ç†æ¨¡å¼ï¼š

```javascript
[Figma Raw JSON]
      â¬‡ï¸
[design-extractor.ts] (å…¥å£)
      â¬‡ï¸
[node-walker.ts] (DFS éå†å¼•æ“)
      â¬‡ï¸
   â”Œâ”€ å¾ªç¯æ¯ä¸ªèŠ‚ç‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  1. isVisible? (ä¸å¯è§åˆ™è·³è¿‡)               â”‚
   â”‚                                           â”‚
   â”‚  2. Extractors (æå–å™¨æµæ°´çº¿):              â”‚
   â”‚     â”œâ”€ [layout.ts] (AutoLayout -> Flex)   â”‚â”€â”€â”€> result.layout
   â”‚     â”œâ”€ [style.ts]  (RGBA -> CSS)          â”‚â”€â”€â”€> result.fills + globalVars
   â”‚     â””â”€ [text.ts]   (px -> em)             â”‚â”€â”€â”€> result.textStyle
   â”‚                                           â”‚
   â”‚  3. Recursion (é€’å½’å­èŠ‚ç‚¹):                 â”‚
   â”‚     â””â”€ å¤„ç† Children...                    â”‚â”€â”€â”€> result.children
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â¬‡ï¸
[Cleaned JSON] (nodes + globalVars)
```
